import{r,j as t,a as N}from"./app-BXrArFBs.js";import{I as n,L as w}from"./index-DNIGxXKG.js";import{A as k}from"./AuthenticatedLayout-D4UnI0sw.js";import"./index-NDvWyOIA.js";import"./ApplicationLogo-BsryiP8T.js";import"./transition-Di5nBCVh.js";const S=({auth:h})=>{const[l,x]=r.useState([]),[g,c]=r.useState(null),a=r.useRef(null),s=r.useRef({}),[d,p]=r.useState(!1);r.useEffect(()=>{(async()=>{try{const i=await(await fetch("/api/destinations")).json();i&&i.destinations&&x(i.destinations)}catch(o){console.error("Error fetching destinations:",o)}})()},[]);const f=e=>{c(e),m(e)},v=()=>{c(null)},m=e=>{s.current[e]&&s.current[e].play()},j=e=>{s.current[e]&&(s.current[e].pause(),s.current[e].currentTime=0)},u=()=>{const e=a.current.getBoundingClientRect().top,o=a.current.getBoundingClientRect().bottom;e>=0&&o<=window.innerHeight?m(l[0].id):j(l[0].id)};r.useEffect(()=>(window.addEventListener("scroll",u),()=>{window.removeEventListener("scroll",u)}),[l]);const b=e=>e.video_url?t.jsxs("video",{id:`video-${e.id}`,ref:o=>s.current[e.id]=o,autoPlay:g===e.id,loop:!0,controls:!0,className:"w-full h-64 object-cover",children:[t.jsx("source",{src:e.video_url,type:"video/mp4"}),"Your browser does not support the video tag."]}):e.image_url?t.jsx("img",{src:e.image_url,alt:e.name,className:"w-full h-64 object-cover"}):null,y=()=>{p(!d)};return t.jsxs(k,{user:h.user,header:t.jsx("nav",{className:"bg-gray-800 rounded-lg","aria-label":"Destinations",style:{backgroundColor:"rgba(0, 38, 61, 1)"},children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-full",children:t.jsxs("div",{className:"flex items-center justify-between h-full",children:[t.jsx("div",{className:"flex items-center",children:t.jsx("div",{className:"flex-shrink-0",children:t.jsx("h2",{className:"text-white font-semibold text-lg",children:"AroundTheWorld"})})}),t.jsxs("div",{className:"ml-4 flex items-center md:ml-6",children:[t.jsxs("div",{className:"relative",children:[t.jsx("button",{className:"text-gray-300 hover:bg-gray-700 hover:text-white px-4 py-2 rounded-md text-sm font-medium",onClick:y,children:"Prenota la tua vacanza!"}),d&&t.jsx("div",{className:"absolute right-0 mt-2 w-56 origin-top-right bg-white rounded-md shadow-lg",children:t.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:[t.jsx(n,{href:"/book-flight",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",role:"menuitem",children:"Prenota il tuo volo!"}),t.jsx(n,{href:"/book-hotel",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",role:"menuitem",children:"Prenota il tuo hotel!"}),t.jsx(n,{href:"/rent-car",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",role:"menuitem",children:"Noleggia la tua macchina!"})]})})]}),t.jsx(n,{href:"/flight-reservations",className:"text-gray-300 hover:bg-gray-700 hover:text-white px-4 py-2 rounded-md text-sm font-medium",children:"Il mio profilo e prenotazioni"})]})]})})}),children:[t.jsx(N,{title:"Tutte le nostre mete"}),t.jsxs("div",{className:"container mx-auto px-4 py-8",children:[t.jsx("h1",{className:"text-3xl font-semibold mb-8 text-white",children:"Tutte le nostre mete"}),t.jsx("div",{ref:a,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",onMouseLeave:v,children:l.map(e=>t.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-md",onMouseEnter:()=>f(e.id),children:[b(e),t.jsxs("div",{className:"p-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-2",children:e.name}),t.jsx("p",{className:"text-gray-700",children:e.description}),t.jsx(w,{href:`/destinations/${e.id}`,className:"block mt-4 text-indigo-500",children:"Scopri di pi√π"})]})]},e.id))})]})]})};export{S as default};
