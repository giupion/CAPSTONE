import{r as o,j as e,a as x}from"./app-BXrArFBs.js";import{I as a}from"./index-DNIGxXKG.js";import{A as g}from"./AuthenticatedLayout-D4UnI0sw.js";import"./index-NDvWyOIA.js";import"./ApplicationLogo-BsryiP8T.js";import"./transition-Di5nBCVh.js";function j({auth:c}){const[t,i]=o.useState(null),[n,d]=o.useState(!1);o.useEffect(()=>{const h=async()=>{try{const s=await fetch("/api/random-destination");if(s.ok){const l=await s.json();i(l.destination),localStorage.setItem("destination",JSON.stringify({...l.destination,expiresAt:Date.now()+864e5}))}else console.error("Failed to fetch random destination:",s.status)}catch(s){console.error("Error fetching random destination:",s)}},r=JSON.parse(localStorage.getItem("destination"));r&&r.expiresAt>Date.now()?i(r):h()},[]);const m=()=>{d(!n)};return e.jsxs(g,{user:c.user,header:e.jsx("nav",{className:"bg-gray-800 rounded-lg","aria-label":"Destinations",style:{backgroundColor:"rgba(0, 38, 61, 1)"},children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-full",children:e.jsxs("div",{className:"flex items-center justify-between h-full",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"flex-shrink-0",children:e.jsx("h2",{className:"text-white font-semibold text-lg",children:"AroundTheWorld"})})}),e.jsxs("div",{className:"ml-4 flex items-center md:ml-6",children:[e.jsx(a,{href:"/all-destinations",className:"text-gray-300 hover:bg-gray-700 hover:text-white px-4 py-2 rounded-md text-sm font-medium",children:"Tutte le nostre mete"}),e.jsx(a,{href:"/flight-reservations",className:"text-gray-300 hover:bg-gray-700 hover:text-white px-4 py-2 rounded-md text-sm font-medium",children:"Il mio profilo e prenotazioni"}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{type:"button",className:"text-gray-300 hover:bg-gray-700 hover:text-white px-4 py-2 rounded-md text-sm font-medium",onClick:m,children:"Prenota la tua vacanza!"}),n&&e.jsx("div",{className:"absolute right-0 mt-2 w-56 origin-top-right bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5",children:e.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:[e.jsx(a,{href:"/city-search",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",children:"Prenota il tuo volo"}),e.jsx(a,{href:"/book-hotel",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",children:"Prenota il tuo hotel"}),e.jsx(a,{href:"/book-car",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",children:"Noleggia la tua auto"})]})})]})]})]})})}),children:[e.jsx(x,{title:"Dashboard"}),e.jsx("div",{className:"py-12",style:{backgroundColor:"rgba(0, 38, 61, 1)"},children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 mt-4",style:{backgroundColor:"rgba(0, 38, 61, 1)"},children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:t?e.jsxs("div",{children:[t.video_url?e.jsxs("video",{autoPlay:!0,controls:!0,className:"w-full h-auto",children:[e.jsx("source",{src:t.video_url,type:"video/mp4"}),"Your browser does not support the video tag."]}):e.jsx("img",{src:t.image_url,alt:t.name,className:"w-full h-64 object-cover"}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:t.name}),e.jsx("p",{children:t.description})]})]}):e.jsx("div",{className:"w-full h-64 bg-gray-300 flex items-center justify-center",children:"Loading..."})})})})]})}export{j as default};
