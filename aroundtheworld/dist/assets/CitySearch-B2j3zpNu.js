import{r as s,j as e,d as R}from"./index-BAun-uyj.js";import{a as D,b as E}from"./index.esm-BRRFUivc.js";import{S as k}from"./slick-theme-D9R7AB4Y.js";import{A as K}from"./AuthenticatedLayout-D86_uxKI.js";const I=({auth:v})=>{const[l,S]=s.useState(""),[c,y]=s.useState(""),[d,g]=s.useState([]),[u,f]=s.useState([]),[r,N]=s.useState(null),[a,w]=s.useState(null),[h,m]=s.useState(null),p=async(t,i,n)=>{var j;try{const o=await E.get("/api/cities",{params:{keyword:t}});i(((j=o==null?void 0:o.data)==null?void 0:j.data)||[])}catch(o){m("Errore durante la ricerca delle città."),console.error("Errore durante la ricerca delle città:",o)}},A=t=>S(t.target.value),b=t=>y(t.target.value),x=(t,i)=>{i==="departure"?N(t):i==="arrival"&&w(t)},z=()=>{if(r&&a){const t={originLocationCode:r.iataCode,originLocationName:r.name,destinationLocationCode:a.iataCode,destinationLocationName:a.name};R.Inertia.visit(route("flight-search-form",{...t,originCityName:r.name,destinationCityName:a.name}))}else m("Seleziona un aeroporto di partenza e uno di destinazione.")},C=(t,i)=>e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"search-results-title",style:{color:"white"},children:"Risultati della ricerca:"}),e.jsx(k,{dots:!0,infinite:!0,speed:500,slidesToShow:3,slidesToScroll:1,children:t.map(n=>e.jsx("div",{onClick:()=>i(n),children:e.jsxs("p",{style:{color:"white"},children:[n.name," - ",n.iataCode]})},n.iataCode))})]});return e.jsxs(K,{user:v.user,children:[e.jsx(D,{title:"City Search"}),e.jsx("div",{className:"form-container",style:{textAlign:"center"},children:e.jsxs("div",{className:"search-inputs",children:[e.jsxs("div",{className:"input-container",style:{marginBottom:"20px"},children:[e.jsx("input",{type:"text",value:l,onChange:A,placeholder:"Città di partenza"}),d.length>0&&C(d,t=>x(t,"departure")),e.jsx("button",{className:"search-button",onClick:()=>p(l,g),children:"Cerca città di partenza"})]}),e.jsxs("div",{className:"input-container",style:{marginBottom:"20px"},children:[e.jsx("input",{type:"text",value:c,onChange:b,placeholder:"Città di arrivo"}),u.length>0&&C(u,t=>x(t,"arrival")),e.jsx("button",{className:"search-button",onClick:()=>p(c,f),children:"Cerca città di arrivo"})]})]})}),e.jsxs("div",{className:"selected-airports",children:[e.jsx("h2",{style:{color:"white"},children:"Aeroporti Selezionati:"}),e.jsxs("ul",{children:[r&&e.jsxs("li",{style:{color:"white"},children:[r.name," - ",r.iataCode," (Partenza)"]}),a&&e.jsxs("li",{style:{color:"white"},children:[a.name," - ",a.iataCode," (Arrivo)"]})]})]}),e.jsx("button",{className:"search-button",onClick:z,children:"Conferma"}),h&&e.jsx("div",{className:"error",children:e.jsx("p",{children:h})})]})};export{I as default};
